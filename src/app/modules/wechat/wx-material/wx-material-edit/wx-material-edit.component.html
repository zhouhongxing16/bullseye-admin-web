<form enctype="multipart/form-data" nz-form [formGroup]="validateForm">
  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="name">素材名称</nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24">
      <input nz-input formControlName="name" [(ngModel)]="obj.name" name="name" id="name">
      <nz-form-explain *ngIf="validateForm.get('name').dirty && validateForm.get('name').errors">
        必填
      </nz-form-explain>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="type">素材类型</nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24">
      <nz-radio-group formControlName="type" [(ngModel)]="obj.type" name="type" id="type">
        <!--<label nz-radio [nzValue]="'image'">图片</label>
        <label nz-radio [nzValue]="'voice'">语音</label>
        <label nz-radio [nzValue]="'video'">视频</label>
        <label nz-radio [nzValue]="'thumb'">缩略图</label>-->
        <label nz-radio [nzValue]="'news'">图文</label>
      </nz-radio-group>
      <nz-form-explain *ngIf="validateForm.get('type').dirty && validateForm.get('type').errors">
        必选
      </nz-form-explain>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="title">标题</nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24">
      <input nz-input formControlName="title" [(ngModel)]="obj.title" name="title" id="title">
      <nz-form-explain *ngIf="validateForm.get('title').dirty && validateForm.get('title').errors">
        必填
      </nz-form-explain>
    </nz-form-control>
  </nz-form-item>


  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="thumbMediaId">封面</nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24">
      <nz-upload
        class="avatar-uploader"
        nzAction="/file/uploadfile"
        nzName="fileUpload"
        nzListType="picture-card"
        [nzShowUploadList]="false"
        [nzBeforeUpload]="beforeUpload"
        (nzChange)="handleChange($event)"
      >
        <ng-container *ngIf="!obj.thumbMediaId">
          <i class="upload-icon" nz-icon [type]="isLoading ? 'loading' : 'plus'"></i>
          <!--<div class="ant-upload-text">封面图</div>-->
        </ng-container>
        <img *ngIf="this.thumbUrl" width="150px" height="150px" [src]="this.thumbUrl" class="avatar"/>
      </nz-upload>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="showCoverPic">显示封面</nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24">
      <nz-radio-group formControlName="showCoverPic" [(ngModel)]="obj.showCoverPic" name="showCoverPic" id="showCoverPic">
        <label nz-radio [nzValue]=false>否</label>
        <label nz-radio [nzValue]=true>是</label>
      </nz-radio-group>
      <nz-form-explain *ngIf="validateForm.get('showCoverPic').dirty && validateForm.get('showCoverPic').errors">
        必选
      </nz-form-explain>
    </nz-form-control>
  </nz-form-item>


  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="author">作者</nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24">
      <input nz-input formControlName="author" [(ngModel)]="obj.author" name="author" id="author">
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24"  nzFor="digest">摘要</nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24">
      <textarea formControlName="digest" rows="4" name="digest" id="digest" nz-input [(ngModel)]="obj.digest"></textarea>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24"  nzFor="content">详细内容</nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24">
      <app-tiny-editor formControlName="content" name="content" id="content" [editor]="Editor" [config]="config"  [(ngModel)]="obj.content">

      </app-tiny-editor>
     <!-- <ckeditor formControlName="content" name="content" id="content" [editor]="Editor" [config]="config"  [(ngModel)]="obj.content">
      </ckeditor>-->
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="contentSourceUrl">原文地址</nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24">
      <input nz-input formControlName="contentSourceUrl" [(ngModel)]="obj.contentSourceUrl" name="contentSourceUrl" id="contentSourceUrl">
    </nz-form-control>
  </nz-form-item>


  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="needOpenComment">打开评论</nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24">
      <nz-radio-group formControlName="needOpenComment" [(ngModel)]="obj.needOpenComment" name="needOpenComment" id="needOpenComment">
        <label nz-radio [nzValue]=false>否</label>
        <label nz-radio [nzValue]=true>是</label>
      </nz-radio-group>
      <nz-form-explain *ngIf="validateForm.get('needOpenComment').dirty && validateForm.get('needOpenComment').errors">
        必选
      </nz-form-explain>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="onlyFansCanComment">游客评论</nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24">
      <nz-radio-group formControlName="onlyFansCanComment" [(ngModel)]="obj.onlyFansCanComment" name="onlyFansCanComment" id="onlyFansCanComment">
        <label nz-radio [nzValue]=false>否</label>
        <label nz-radio [nzValue]=true>是</label>
      </nz-radio-group>
      <nz-form-explain *ngIf="validateForm.get('onlyFansCanComment').dirty && validateForm.get('onlyFansCanComment').errors">
        必选
      </nz-form-explain>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item *ngIf="obj.type == 'video'">
    <nz-form-label [nzSm]="6" [nzXs]="24"  nzFor="introduction">视频描述</nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24">
      <textarea formControlName="introduction" rows="4" name="introduction" id="introduction" nz-input [(ngModel)]="obj.introduction"></textarea>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item nz-row style="margin-bottom:8px;">
    <nz-form-control [nzSpan]="14" [nzOffset]="6">
      <button nz-button nzType="primary" [disabled]="!validateForm.valid" [nzLoading]="isLoading" (click)="submitForm()">保存</button>&nbsp;&nbsp;
      <button nz-button nzType="dashed" routerLink="/wxmaterial/list" [nzLoading]="isLoading">取消</button>
    </nz-form-control>
  </nz-form-item>
</form>

